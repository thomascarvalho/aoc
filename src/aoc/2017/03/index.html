<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="First things first, let&apos;s load our input and parse it" property="og:description"><meta content="Problem" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VtkwjezeveUYV2dWuoYhwm4RKE34u1GvaiYBiweWJnx9Pf3YzRye7UD24z7dV5ESFsoK3Air5iDtUqufdfvy9UfpA.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
  font-style: normal !important;
}

html:not(.dark) {
  background-color: #f4f3f3;
}

html.dark {
  background-color: #222831 !important;
}

body {
  background: transparent !important;
}

html:not(.dark) pre {
  background-color: #f1f5f9 !important;
  color: #7aaac4 !important;
}

.font-display {
  font-family: 'Fira Sans Condensed', sans-serif;
}

.dark em {
  color: #fff !important;
  text-shadow: 0 0 5px #fff !important;
}

.dark pre {
  background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
  color: #000 !important;
  text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
  display: none !important;
}

.notebook-viewer > pre > code {
  background: transparent !important;
}

.notebook-viewer
  :is(:where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))),
.markdown-viewer
  :is(:where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))) {
  background-color: transparent;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/aoc/2017/03\" {:path [], :nextjournal/value {:toc [{:title \"Problem\", :emoji nil, :path \"#problem\", :items []} {:title \"Solution\", :emoji nil, :path \"#solution\", :items [{:title \"Part 1\", :emoji nil, :path \"#part-1\", :items []} {:title \"Part 2\", :emoji nil, :path \"#part-2\", :items []}]} {:title \"Tests\", :emoji nil, :path \"#tests\", :items []}], :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns aoc.2017.03), :file \"src/aoc/2017/03.clj\", :scope aoc.2017.03, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"â€¢\"]] [:span \"Served from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] nil]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}, :open-graph {:type \"article:clerk\", :title \"Problem\", :description \"First things first, let's load our input and parse it\"}, :title \"Problem\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.03/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"} [\"h1\" {:id \"problem\"} [:<> \"Problem\"]]], :nextjournal/render-opts {:id \"aoc.2017.03/markdown-5dqq5acBASUPKy7JX3Uoyxc1KPMN9A\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div {:dangerouslySetInnerHTML {:__html \"<details><summary class=\\\"cursor-pointer\\\"><span class=\\\"text-xl font-bold\\\">Details</span></summary><article class=\\\"day-desc\\\"><h2>--- Day 3: Spiral Memory ---</h2><p>You come across an experimental new kind of memory stored on an <span title=\\\"Good thing we have all these infinite two-dimensional grids lying around!\\\">infinite two-dimensional grid</span>.</p>\\n<p>Each square on the grid is allocated in a spiral pattern starting at a location marked <code>1</code> and then counting up while spiraling outward. For example, the first few squares are allocated like this:</p>\\n<pre><code>17  16  15  14  13\\n18   5   4   3  12\\n19   6   1   2  11\\n20   7   8   9  10\\n21  22  23---&gt; ...\\n</code></pre>\\n<p>While this is very space-efficient (no squares are skipped), requested data must be carried back to square <code>1</code> (the location of the only access port for this memory system) by programs that can only move up, down, left, or right. They always take the shortest path: the <a href=\\\"https://en.wikipedia.org/wiki/Taxicab_geometry\\\">Manhattan Distance</a> between the location of the data and square <code>1</code>.</p>\\n<p>For example:</p>\\n<ul>\\n<li>Data from square <code>1</code> is carried <code>0</code> steps, since it's at the access port.</li>\\n<li>Data from square <code>12</code> is carried <code>3</code> steps, such as: down, left, left.</li>\\n<li>Data from square <code>23</code> is carried only <code>2</code> steps: up twice.</li>\\n<li>Data from square <code>1024</code> must be carried <code>31</code> steps.</li>\\n</ul>\\n<p><em>How many steps</em> are required to carry the data from the square identified in your puzzle input all the way to the access port?</p>\\n</article></details>\"}}], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}, :nextjournal/render-opts {:id \"aoc.2017.03/anon-expr-5dtSA3smwms8aHzNBgxJ1VvWJcpFe7-result\"}}, :nextjournal/blob-id \"5duHso39SB2Kxqkef7sFd5K6pN7hnC\", :nextjournal/fetch-opts {:blob-id \"5duHso39SB2Kxqkef7sFd5K6pN7hnC\"}, :nextjournal/hash \"8VxUUr8SfodQryFYZBnSCL1iJ6WJSLZ12A6biAj8aoYAZomN5afFVkaQGgDrPS32dhPBZNg5SzqghsTPc645HhCThV\"}, :nextjournal/render-opts {:id \"aoc.2017.03/anon-expr-5dtSA3smwms8aHzNBgxJ1VvWJcpFe7-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.03/markdown-5dtn8GCqw2urNoSmsQ2X8JrdZtqMfk\"} [\"h1\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"First things first, let's load our input and parse it\"]]], :nextjournal/render-opts {:id \"aoc.2017.03/markdown-5dtn8GCqw2urNoSmsQ2X8JrdZtqMfk\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn parser [data]\\n  (-> data\\n      (str/replace #\\\"\\\\n\\\" \\\"\\\")\\n      parse-long))\", :nextjournal/render-opts {:loc {:line 22, :end-line 25, :column 1, :end-column 19}, :id \"aoc.2017.03/parser-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[aoc.2017.03$parser 0x7a1af2db \\\"aoc.2017.03$parser@7a1af2db\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"aoc.2017.03/parser-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"aoc.2017.03/parser-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2017/03.txt\\\"))\\n                parser))\", :nextjournal/render-opts {:loc {:line 27, :end-line 28, :column 1, :end-column 25}, :id \"aoc.2017.03/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value 277678, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}, :nextjournal/render-opts {:id \"aoc.2017.03/input-result\"}}, :nextjournal/blob-id \"5dt9Uq8dP6F6myLJLBx8JZ1Tzd4tn1\", :nextjournal/fetch-opts {:blob-id \"5dt9Uq8dP6F6myLJLBx8JZ1Tzd4tn1\"}, :nextjournal/hash \"8VwKqxe2aW9k9rF7WRrSYJoExBD2tWcu4tiaK2BK7G9gSRgTU5c78rkpeDiaEu4K8XE5Tr7cLStD7C63htzFbdG2iW\"}, :nextjournal/render-opts {:id \"aoc.2017.03/input-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.03/markdown-5drgojQ2ThS3FZxp1HuzcXgLajGtdm\"} [:p [:<> \"Example\"]]], :nextjournal/render-opts {:id \"aoc.2017.03/markdown-5drgojQ2ThS3FZxp1HuzcXgLajGtdm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(def input-example (parser \\\"\\\"))\", :nextjournal/render-opts {:loc {:line 33, :end-line 33, :column 1, :end-column 32}, :id \"aoc.2017.03/input-example-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value \"(def dirs [[1 0]\\n           [0 1]\\n           [-1 0]\\n           [0 -1]])\", :nextjournal/render-opts {:loc {:line 35, :end-line 38, :column 1, :end-column 20}, :id \"aoc.2017.03/dirs-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.03/markdown-5drFf1TXNZLn336Ph1vwbkx8cA6KDv\"} [\"h2\" {:id \"part-1\"} [:<> \"Part 1\"]]], :nextjournal/render-opts {:id \"aoc.2017.03/markdown-5drFf1TXNZLn336Ph1vwbkx8cA6KDv\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [data]\\n  (->>\\n   (loop [idx               1\\n          pos               [0 0]\\n          [dir & next-dirs] (cycle dirs)\\n          step              1\\n          last-step         nil]\\n     (if (>= idx data)\\n       pos\\n       (let [new-step          (if (and last-step (= last-step step))\\n                                 (inc step)\\n                                 step)\\n             [new-pos new-idx] (reduce\\n                                (fn [[pos idx] dir]\\n                                  (let [idx (inc idx)\\n                                        pos (mapv + pos dir)]\\n                                    (if (= idx data)\\n                                      (reduced [pos idx])\\n                                      [pos idx])))\\n                                [pos idx]\\n                                (repeat step dir))]\\n         (recur\\n          new-idx\\n          new-pos\\n          next-dirs\\n          new-step\\n          step))))\\n   (u/manhattan-distance [0 0])))\", :nextjournal/render-opts {:loc {:line 41, :end-line 69, :column 1, :end-column 34}, :id \"aoc.2017.03/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.03/markdown-5dqo1NXgLfjhMgxykGcEprXUno7u6y\"} [\"h2\" {:id \"part-2\"} [:<> \"Part 2\"]]], :nextjournal/render-opts {:id \"aoc.2017.03/markdown-5dqo1NXgLfjhMgxykGcEprXUno7u6y\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn sum-adjacents [pos cells]\\n  (reduce (fn [t coords]\\n            (+ t (get cells (mapv + pos coords) 0))) 0 [[1 0] [0 1] [-1 0] [0 -1] [1 1] [-1 1] [-1 -1] [1 -1]]))\", :nextjournal/render-opts {:loc {:line 76, :end-line 78, :column 1, :end-column 113}, :id \"aoc.2017.03/sum-adjacents-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [data]\\n  (loop [idx               1\\n         pos               [0 0]\\n         [dir & next-dirs] (cycle dirs)\\n         step              1\\n         last-step         nil\\n         cells             {[0 0] 1}]\\n    (let [new-step (if (and last-step (= last-step step))\\n                     (inc step)\\n                     step)\\n          r        (reduce\\n                    (fn [[[pos idx] cells] dir]\\n                      (let [idx (inc idx)\\n                            pos (mapv + pos dir)\\n                            t   (sum-adjacents pos cells)]\\n                        (if (> t data)\\n                          (reduced t #_[[pos idx] (assoc cells pos t)])\\n                          [[pos idx] (assoc cells pos t)])))\\n                    [[pos idx] cells]\\n                    (repeat step dir))]\\n      (if (number? r)\\n        r\\n        (let [[[new-pos new-idx] cells] r]\\n          (recur\\n           new-idx\\n           new-pos\\n           next-dirs\\n           new-step\\n           step\\n           cells))))))\", :nextjournal/render-opts {:loc {:line 81, :end-line 111, :column 1, :end-column 23}, :id \"aoc.2017.03/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.03/markdown-5dtDWouhgRcvd3akFfTpyZfsmDVeUm\"} [\"h1\" {:id \"tests\"} [:<> \"Tests\"]]], :nextjournal/render-opts {:id \"aoc.2017.03/markdown-5dtDWouhgRcvd3akFfTpyZfsmDVeUm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(deftest test-2017-03\\n  (testing \\\"part one\\\"\\n    (is (= 475 (part-1 input))))\\n\\n  (testing \\\"part two\\\"\\n    (is (= 279138 (part-2 input)))))\", :nextjournal/render-opts {:loc {:line 116, :end-line 121, :column 1, :end-column 37}, :id \"aoc.2017.03/test-2017-03-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.grid.grid-cols-3.gap-10 ([:div {:class \"flex flex-col gap-4 p-6 items-center text-black font-semibold bg-green-200\"} [:span.capitalize.text-lg.text-black \"pass\"] [:span.text-xl.font-bold 2]] [:div {:class \"flex flex-col gap-4 p-6 items-center text-black font-semibold bg-orange-200 opacity-25\"} [:span.capitalize.text-lg.text-black \"fail\"] [:span.text-xl.font-bold 0]] [:div {:class \"flex flex-col gap-4 p-6 items-center text-black font-semibold bg-red-200 opacity-25\"} [:span.capitalize.text-lg.text-black \"error\"] [:span.text-xl.font-bold 0]])], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}, :nextjournal/render-opts {:id \"aoc.2017.03/anon-expr-5dtBAchn4bFTf66rwwjd6UjhHA3p6U-result\"}}, :nextjournal/blob-id \"5drcxWHc57JX6tR7rbFtspH4pBKdWE\", :nextjournal/fetch-opts {:blob-id \"5drcxWHc57JX6tR7rbFtspH4pBKdWE\"}, :nextjournal/hash \"8Vtxi3vZfHFXdHvKG5aCSqeAsaazda385sejqm7VNt9zoVotjARWWR3UUeCcGABrPuo9yLaKhhnsNzRv4DhB8c6cad\"}, :nextjournal/render-opts {:id \"aoc.2017.03/anon-expr-5dtBAchn4bFTf66rwwjd6UjhHA3p6U-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :current-path \"src/aoc/2017/03\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VtkwjezeveUYV2dWuoYhwm4RKE34u1GvaiYBiweWJnx9Pf3YzRye7UD24z7dV5ESFsoK3Air5iDtUqufdfvy9UfpA.css\"}, :index \"src/index.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>