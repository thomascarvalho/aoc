<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta content="{:nextjournal.clerk/visibility {:code :hide :result :show}} (clerk/html (u/load-problem &quot;10&quot; &quot;2017&quot;)) {:nextjournal.clerk/visibility {:code :show :result :show}}" property="og:description"><meta content="Problem" property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../../../_data/8VwC6fDMy6vk5cFDRApNww7gzg5ZkHPof25FWfy2Xk5sXLC7Y5hcdUv8KhPr3oxgq3LKb4mNZWdWc4JtsXLkwHnmg1.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
  font-style: normal !important;
}

html:not(.dark) {
  background-color: #f4f3f3;
}

html.dark {
  background-color: #222831 !important;
}

body {
  background: transparent !important;
}

html:not(.dark) pre {
  background-color: #f1f5f9 !important;
  color: #7aaac4 !important;
}

.font-display {
  font-family: 'Fira Sans Condensed', sans-serif;
}

.dark em {
  color: #fff !important;
  text-shadow: 0 0 5px #fff !important;
}

.dark pre {
  background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
  color: #000 !important;
  text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
  display: none !important;
}

.notebook-viewer > pre > code {
  background: transparent !important;
}

.notebook-viewer
  :is(:where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))),
.markdown-viewer
  :is(:where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))) {
  background-color: transparent;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/aoc/2017/10\" {:path [], :nextjournal/value {:toc [{:title \"Problem\", :emoji nil, :path \"#problem\", :items []} {:title \"Solution\", :emoji nil, :path \"#solution\", :items [{:title \"Part 1\", :emoji nil, :path \"#part-1\", :items []} {:title \"Part 2\", :emoji nil, :path \"#part-2\", :items []}]} {:title \"Tests\", :emoji nil, :path \"#tests\", :items []}], :sidenotes? false, :toc-visibility true, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns aoc.2017.10), :file \"src/aoc/2017/10.clj\", :scope aoc.2017.10, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../../../\"} \"Index\"] [:span.mx-2 \"â€¢\"]] [:span \"Served from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] nil]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}, :open-graph {:type \"article:clerk\", :title \"Problem\", :description \"{:nextjournal.clerk/visibility {:code :hide :result :show}} (clerk/html (u/load-problem \\\"10\\\" \\\"2017\\\")) {:nextjournal.clerk/visibility {:code :show :result :show}}\"}, :title \"Problem\", :blocks [{:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.10/markdown-5duAgvdoWCZyN64EbZrWBzNdHao5Ah\"} [\"h1\" {:id \"problem\"} [:<> \"Problem\"]] [:p [:<> \"{:nextjournal.clerk/visibility {:code :hide :result :show}}\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"(clerk/html (u/load-problem \\\"10\\\" \\\"2017\\\"))\"] [#viewer-eval nextjournal.clerk.render/inspect-presented {:nextjournal/value [:<> \" \"], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}] [:<> \"{:nextjournal.clerk/visibility {:code :show :result :show}}\"]] [\"h1\" {:id \"solution\"} [:<> \"Solution\"]] [:p [:<> \"First things first, let's load our input and parse it\"]]], :nextjournal/render-opts {:id \"aoc.2017.10/markdown-5duAgvdoWCZyN64EbZrWBzNdHao5Ah\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn parser [data]\\n  (->> data\\n       u/parse-out-longs))\", :nextjournal/render-opts {:loc {:line 20, :end-line 22, :column 1, :end-column 27}, :id \"aoc.2017.10/parser-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[aoc.2017.10$parser 0x5cde9fee \\\"aoc.2017.10$parser@5cde9fee\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"aoc.2017.10/parser-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"aoc.2017.10/parser-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(def input (->> (slurp (io/resource \\\"inputs/2017/10.txt\\\")) ;; Load the resource\\n))                             ;; Split into lines\", :nextjournal/render-opts {:loc {:line 24, :end-line 25, :column 1, :end-column 3}, :id \"aoc.2017.10/input-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"14,58,0,116,179,16,1,104,2,254,167,86,255,55,122,244\\n\", :nextjournal/viewer {:name nextjournal.clerk.viewer/string-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-quoted-string, :opening-paren \"\\\"\", :closing-paren (\"\\\"\"), :page-size 80, :hash \"5dsoVKnSNgnKXj1Cv4qvD6xr6wMks7\"}, :nextjournal/render-opts {:id \"aoc.2017.10/input-result\"}}, :nextjournal/blob-id \"5dthEB4M4RSiiHUxps2o3gDrx8qi6N\", :nextjournal/fetch-opts {:blob-id \"5dthEB4M4RSiiHUxps2o3gDrx8qi6N\"}, :nextjournal/hash \"8VuTYUm7ZDZjmk9WkUHbcU6bTuiTRLxRvjrfamyz4hxkKuEk8gtDGrgMTQuSit16LzGGGzML5ef9vTJ97abwWWcBDj\"}, :nextjournal/render-opts {:id \"aoc.2017.10/input-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn get-num [nums idx]\\n  (get nums (mod idx (count nums))))\", :nextjournal/render-opts {:loc {:line 28, :end-line 29, :column 1, :end-column 37}, :id \"aoc.2017.10/get-num-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value \"(defn set-num [nums idx v]\\n  (assoc nums (mod idx (count nums)) v))\", :nextjournal/render-opts {:loc {:line 31, :end-line 32, :column 1, :end-column 41}, :id \"aoc.2017.10/set-num-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value \"(defn get-range [nums start length]\\n  (map #(get-num nums %) (range start (+ start length))))\", :nextjournal/render-opts {:loc {:line 34, :end-line 35, :column 1, :end-column 58}, :id \"aoc.2017.10/get-range-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.10/markdown-5drgojQ2ThS3FZxp1HuzcXgLajGtdm\"} [:p [:<> \"Example\"]]], :nextjournal/render-opts {:id \"aoc.2017.10/markdown-5drgojQ2ThS3FZxp1HuzcXgLajGtdm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(def input-example (parser \\\"3, 4, 1, 5\\\"))\", :nextjournal/render-opts {:loc {:line 38, :end-line 38, :column 1, :end-column 42}, :id \"aoc.2017.10/input-example-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.10/markdown-5drFf1TXNZLn336Ph1vwbkx8cA6KDv\"} [\"h2\" {:id \"part-1\"} [:<> \"Part 1\"]]], :nextjournal/render-opts {:id \"aoc.2017.10/markdown-5drFf1TXNZLn336Ph1vwbkx8cA6KDv\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-1\\n  [data]\\n  (let [lengths data\\n        ;; nums    [0, 1, 2, 3, 4]\\n        nums    (into [] (range 0 256))\\n\\n        [a b]   (loop [nums               nums\\n                       idx                0\\n                       skip               0\\n                       [l & next-lengths] lengths]\\n                  (if l\\n                    (let [reversed-sub (into [] (reverse (get-range nums idx l)))]\\n                      (recur\\n                       (reduce (fn [nums i]\\n                                 (set-num nums (+ idx i) (get reversed-sub i))) nums (range 0 l))\\n                       (+ idx l skip)\\n                       (inc skip)\\n                       next-lengths))\\n                    nums))]\\n    (* a b)))\", :nextjournal/render-opts {:loc {:line 41, :end-line 60, :column 1, :end-column 14}, :id \"aoc.2017.10/part-1-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.10/markdown-5dqo1NXgLfjhMgxykGcEprXUno7u6y\"} [\"h2\" {:id \"part-2\"} [:<> \"Part 2\"]]], :nextjournal/render-opts {:id \"aoc.2017.10/markdown-5dqo1NXgLfjhMgxykGcEprXUno7u6y\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(defn part-2\\n  [data]\\n  (let [lengths     (concat (as-> data $\\n                              (str/replace $ #\\\"\\\\n\\\" \\\"\\\")\\n                              (char-array $)\\n                              (map int $))\\n                            [17, 31, 73, 47, 23])\\n        nums        (into [] (range 0 256))\\n        sparse-hash (loop [idx    0\\n                           skip   0\\n                           rounds 0\\n                           nums   nums]\\n\\n                      (if (= rounds 64)\\n                        nums\\n                        (let [[idx skip new-nums] (loop [nums               nums\\n                                                         idx                idx\\n                                                         skip               skip\\n                                                         [l & next-lengths] lengths]\\n                                                    (if l\\n                                                      (let [reversed-sub (into [] (reverse (get-range nums idx l)))]\\n                                                        (recur\\n                                                         (reduce (fn [nums i]\\n                                                                   (set-num nums (+ idx i) (get reversed-sub i))) nums (range 0 l))\\n                                                         (+ idx l skip)\\n                                                         (inc skip)\\n                                                         next-lengths))\\n                                                      [idx skip nums]))]\\n                          (recur\\n                           idx\\n                           skip\\n                           (inc rounds)\\n                           new-nums))))]\\n\\n    (->>\\n     (partition 16 sparse-hash)\\n     (map (fn [p]\\n            (apply bit-xor p)))\\n     (mapcat #(format \\\"%02x\\\" %))\\n     (apply str))))\", :nextjournal/render-opts {:loc {:line 65, :end-line 104, :column 1, :end-column 20}, :id \"aoc.2017.10/part-2-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value [:div.viewer.markdown-viewer.w-full.max-w-prose.px-8 {:data-block-id \"aoc.2017.10/markdown-5dtDWouhgRcvd3akFfTpyZfsmDVeUm\"} [\"h1\" {:id \"tests\"} [:<> \"Tests\"]]], :nextjournal/render-opts {:id \"aoc.2017.10/markdown-5dtDWouhgRcvd3akFfTpyZfsmDVeUm\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/markdown-node-viewer, :render-fn #viewer-fn identity, :hash \"5dsjzwxRkivFXiBf1NDMWmH54cVWV1\"}} {:path [], :nextjournal/value \"(deftest test-2017-10\\n  (testing \\\"part one\\\"\\n    (is (= 1935 (part-1 (parser input)))))\\n\\n  (testing \\\"part two\\\"\\n    (is (= \\\"dc7e7dee710d4c7201ce42713e6b8359\\\" (part-2 input)))))\", :nextjournal/render-opts {:loc {:line 109, :end-line 114, :column 1, :end-column 65}, :id \"aoc.2017.10/test-2017-10-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [:div.grid.grid-cols-3.gap-10 ([:div {:class \"flex flex-col gap-4 p-6 items-center text-black font-semibold bg-green-200\"} [:span.capitalize.text-lg.text-black \"pass\"] [:span.text-xl.font-bold 2]] [:div {:class \"flex flex-col gap-4 p-6 items-center text-black font-semibold bg-orange-200 opacity-25\"} [:span.capitalize.text-lg.text-black \"fail\"] [:span.text-xl.font-bold 0]] [:div {:class \"flex flex-col gap-4 p-6 items-center text-black font-semibold bg-red-200 opacity-25\"} [:span.capitalize.text-lg.text-black \"error\"] [:span.text-xl.font-bold 0]])], :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}, :nextjournal/render-opts {:id \"aoc.2017.10/anon-expr-5ds4QUupk9nDwGLbi1E8tUNigV2adk-result\"}}, :nextjournal/blob-id \"5dsa8fkkEuU6WDWLXBZ3piGLw3SJZV\", :nextjournal/fetch-opts {:blob-id \"5dsa8fkkEuU6WDWLXBZ3piGLw3SJZV\"}, :nextjournal/hash \"8VwXcGTWeqebwJ8YHwu6cgdHsHbUDi5fN8uircBxiZFV5a2Yshu7s2kbdAdsFti6LfndZWXhzqPb9WTbWWFBwmnVsq\"}, :nextjournal/render-opts {:id \"aoc.2017.10/anon-expr-5ds4QUupk9nDwGLbi1E8tUNigV2adk-result\"}, :nextjournal/visibility {:code :hide, :result :show}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :current-path \"src/aoc/2017/10\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8VwC6fDMy6vk5cFDRApNww7gzg5ZkHPof25FWfy2Xk5sXLC7Y5hcdUv8KhPr3oxgq3LKb4mNZWdWc4JtsXLkwHnmg1.css\"}, :index \"src/index.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>