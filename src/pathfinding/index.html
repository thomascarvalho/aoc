<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta content="width=device-width, initial-scale=1" name="viewport"><meta property="og:description"><meta property="og:title"><meta content="article:clerk" property="og:type"><meta content="summary_large_image" name="twitter:card"><link href="./../../_data/8Vu85rrzNDdW6madcMcC81igyTf1P4p3jHvXtVikCcRdVLpNBbfR5AqttywaAngZaSSN8JfbwxW5cp6GLpe3Xx3vP4.css" rel="stylesheet" type="text/css"><script src="https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true" type="module"></script><link href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" rel="stylesheet" type="text/css"><link href="https://fonts.bunny.net" rel="preconnect"><link href="https://fonts.bunny.net/css?family=fira-mono:400,700%7Cfira-sans:400,400i,500,500i,700,700i%7Cfira-sans-condensed:700,700i%7Cpt-serif:400,400i,700,700i" rel="stylesheet" type="text/css"><style id="extra-styles">em {
  font-style: normal !important;
}

html:not(.dark) {
  background-color: #f4f3f3;
}

html.dark {
  background-color: #222831 !important;
}

body {
  background: transparent !important;
}

html:not(.dark) pre {
  background-color: #f1f5f9 !important;
  color: #7aaac4 !important;
}

.font-display {
  font-family: 'Fira Sans Condensed', sans-serif;
}

.dark em {
  color: #fff !important;
  text-shadow: 0 0 5px #fff !important;
}

.dark pre {
  background-color: rgb(31 41 55 / var(--tw-bg-opacity)) !important;
}

html:not(.dark) em {
  color: #000 !important;
  text-shadow: 0 0 2px #000 !important;
}

.viewer-result:first-child {
  display: none !important;
}

.notebook-viewer > pre > code {
  background: transparent !important;
}

.notebook-viewer
  :is(:where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))),
.markdown-viewer
  :is(:where(code):not(:where([class~="not-prose"], [class~="not-prose"] *))) {
  background-color: transparent;
}
</style></head><body class="dark:bg-gray-900"><div id="clerk"></div><script type="module">let viewer = nextjournal.clerk.sci_env
let state = "{:bundle? false, :path->doc {\"src/pathfinding\" {:path [], :nextjournal/value {:toc [], :sidenotes? false, :toc-visibility false, :atom-var-name->state #viewer-eval (nextjournal.clerk.render/intern-atoms! {}), :ns #viewer-eval (ns pathfinding), :file \"src/pathfinding.clj\", :scope pathfinding, :bundle? false, :header {:path [], :nextjournal/value [:div.viewer.w-full.max-w-prose.px-8.not-prose.mt-3 [:div.mb-8.text-xs.sans-serif.text-slate-400 nil [:<> [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"./../../\"} \"Index\"] [:span.mx-2 \"•\"]] [:span \"Served from \" [:a.font-medium.border-b.border-dotted.border-slate-300.hover:text-indigo-500.hover:border-indigo-500.dark:border-slate-500.dark:hover:text-white.dark:hover:border-white.transition {:href \"https://clerk.vision\"} \"Clerk\"] nil]]], :nextjournal/viewer {:name nextjournal.clerk.viewer/html-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-html, :hash \"5dtFMoRpfSur3BJ5RKN8sHB4mECYMZ\"}}, :open-graph {:type \"article:clerk\", :title nil, :description nil}, :blocks [{:path [], :nextjournal/value \"(ns pathfinding\\n  (:require [clojure.set :refer [union]]\\n            [ubergraph.core :as uber]\\n            [pp-grid.api :as pg]))\", :nextjournal/render-opts {:loc {:line 1, :end-line 4, :column 1, :end-column 35}, :id \"pathfinding/anon-expr-5duFJPm6nqHF9ajDBChkb3js4EyGAn-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value \"(def grid [[1 2 3]\\n           [4 5 6]\\n           [7 8 9]])\", :nextjournal/render-opts {:loc {:line 6, :end-line 8, :column 1, :end-column 21}, :id \"pathfinding/grid-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value [{:path [0], :nextjournal/value [{:path [0 0], :nextjournal/value 1, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [0 1], :nextjournal/value 2, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [0 2], :nextjournal/value 3, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [1], :nextjournal/value [{:path [1 0], :nextjournal/value 4, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [1 1], :nextjournal/value 5, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [1 2], :nextjournal/value 6, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}} {:path [2], :nextjournal/value [{:path [2 0], :nextjournal/value 7, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [2 1], :nextjournal/value 8, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}} {:path [2 2], :nextjournal/value 9, :nextjournal/viewer {:name nextjournal.clerk.viewer/number-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-number, :hash \"5drsU4XXFvRiNxHZXiNRRP4gBX7jiW\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :closing-paren (\"]\" \"]\"), :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}}], :nextjournal/viewer {:name nextjournal.clerk.viewer/vector-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-coll, :opening-paren \"[\", :page-size 20, :hash \"5dsPqhnXQ6NY7bfSdVZe5SH2Voaoff\"}, :nextjournal/render-opts {:id \"pathfinding/grid-result\"}}, :nextjournal/blob-id \"5dtKZqmjELHBJkpuEq5i7qLUyfDiVw\", :nextjournal/fetch-opts {:blob-id \"5dtKZqmjELHBJkpuEq5i7qLUyfDiVw\"}, :nextjournal/hash \"8VtV4vUVmLSiVnyjk248YefYsEUJTphz17KSzojBhCXeqxLhajbqwFiQuiDdRr8djg7ouoQTKKNiFZN9Hk3KZ6Ax5D\"}, :nextjournal/render-opts {:id \"pathfinding/grid-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn decode-matrix\\n  \\\"Get :width, :height and :cells {[y x] value, [y2 x2] value2 ... }\\\"\\n  ([m]\\n   (decode-matrix identity m))\\n  ([decode-val-fn m]\\n   {:width  (count (first m))\\n    :height (count m)\\n    :cells  (->>\\n             (for [[y row] (map-indexed vector m)\\n                   [x v]   (map-indexed vector row)]\\n               (sorted-map [y x] (decode-val-fn v)))\\n             (apply merge))}))\", :nextjournal/render-opts {:loc {:line 10, :end-line 21, :column 1, :end-column 31}, :id \"pathfinding/decode-matrix-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[pathfinding$decode_matrix 0x1db93a85 \\\"pathfinding$decode_matrix@1db93a85\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"pathfinding/decode-matrix-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"pathfinding/decode-matrix-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn neighbors [cell grid]\\n  (let [[y x] cell]\\n    (filter #(and (grid %))\\n            [[(dec y) x] [(inc y) x] [y (dec x)] [y (inc x)]])))\", :nextjournal/render-opts {:loc {:line 23, :end-line 26, :column 1, :end-column 65}, :id \"pathfinding/neighbors-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[pathfinding$neighbors 0x4d2da72f \\\"pathfinding$neighbors@4d2da72f\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"pathfinding/neighbors-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"pathfinding/neighbors-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn bfs\\n  ([grid start end]\\n   (bfs grid start end neighbors))\\n  ([grid start end neighbors-fn]\\n   (loop [frontier  (conj clojure.lang.PersistentQueue/EMPTY start)\\n          came-from {start nil}\\n          visited   #{start}]\\n     (when (seq frontier)\\n       (let [current     (peek frontier)\\n             new-visited (conj visited current)]\\n         (if (= current end)\\n           (reverse (cons end (take-while #(not (nil? %)) (iterate came-from (came-from end)))))\\n           (let [next-neighbors (filter #(not (visited %))\\n                                        (neighbors-fn current grid))]\\n             (recur\\n              (reduce conj (pop frontier) next-neighbors)\\n              (reduce #(assoc %1 %2 current) came-from next-neighbors)\\n              (union new-visited (set next-neighbors))))))))))\", :nextjournal/render-opts {:loc {:line 28, :end-line 45, :column 1, :end-column 63}, :id \"pathfinding/bfs-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[pathfinding$bfs 0x4c900a4b \\\"pathfinding$bfs@4c900a4b\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"pathfinding/bfs-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"pathfinding/bfs-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn draw-grid\\n  [cells & {:keys [reverse?]}]\\n  (let [assoc-data (fn [grid items] (reduce (fn [acc [k v]]\\n                                              (assoc acc (if reverse?\\n                                                           (into [] (reverse k))\\n                                                           k) (str v))) grid items))]\\n    (-> (pg/empty-grid)\\n        (assoc-data cells) #_(assoc-data cells)\\n        #_(pg/box :left-padding 1 :right-padding 1))))\", :nextjournal/render-opts {:loc {:line 47, :end-line 55, :column 1, :end-column 55}, :id \"pathfinding/draw-grid-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[pathfinding$draw_grid 0x3077e491 \\\"pathfinding$draw_grid@3077e491\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"pathfinding/draw-grid-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"pathfinding/draw-grid-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn find-all-paths\\n  \\\"Trouve tous les chemins possibles entre start-node et end-node dans un graphe orienté\\\"\\n  [graph start-node end-node]\\n  (let [paths (atom [])\\n        find-paths\\n        (fn find-paths [current-node current-path visited]\\n          (if (= current-node end-node)\\n            (swap! paths conj current-path)\\n            ;; Utilisation de successors pour un graphe orienté\\n            (doseq [neighbor (uber/successors graph current-node)]\\n              (when-not (visited neighbor)\\n                (find-paths neighbor\\n                            (conj current-path neighbor)\\n                            (conj visited neighbor))))))]\\n    (find-paths start-node [start-node] #{start-node})\\n    @paths))\", :nextjournal/render-opts {:loc {:line 57, :end-line 72, :column 1, :end-column 13}, :id \"pathfinding/find-all-paths-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[pathfinding$find_all_paths 0x644e8d08 \\\"pathfinding$find_all_paths@644e8d08\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"pathfinding/find-all-paths-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"pathfinding/find-all-paths-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}} {:path [], :nextjournal/value \"(defn find-all-paths-optimized\\n  \\\"Trouve tous les chemins possibles entre start-node et end-node dans un graphe non orienté,\\n   avec une limite de profondeur pour éviter une explosion combinatoire\\\"\\n  [graph start-node end-node & {:keys [max-depth max-paths] :or {max-depth 20 max-paths 1000}}]\\n  (let [paths (atom [])\\n        ;; Utilisation d'une PriorityQueue pour favoriser les chemins les plus courts\\n        queue (java.util.PriorityQueue.\\n               (comparator (fn [a b]\\n                             (compare (count (second a))\\n                                      (count (second b))))))]\\n\\n    ;; On commence avec le chemin initial\\n    (.add queue [start-node [start-node] #{start-node}])\\n\\n    (while (and (not (.isEmpty queue))\\n                (< (count @paths) max-paths)) ; Limite le nombre total de chemins\\n      (let [[current-node current-path visited] (.poll queue)]\\n        (if (= current-node end-node)\\n          (swap! paths conj current-path)\\n          ;; Continue seulement si on n'a pas atteint la profondeur maximale\\n          (when (< (count current-path) max-depth)\\n            (doseq [neighbor (uber/neighbors graph current-node)]\\n              (when-not (visited neighbor)\\n                (.add queue\\n                      [neighbor\\n                       (conj current-path neighbor)\\n                       (conj visited neighbor)])))))))\\n\\n    ;; Trie les chemins par longueur et limite le nombre de résultats\\n    (->> @paths\\n         (sort-by count)\\n         (take 100) ; Limite à 100 chemins\\n         vec)))\", :nextjournal/render-opts {:loc {:line 74, :end-line 106, :column 1, :end-column 16}, :id \"pathfinding/find-all-paths-optimized-code\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/code-block-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-code-block, :hash \"5dtogCRMFvgKZ3gMGuwZAef65oxRZD\"}} {:path [], :nextjournal/value {:nextjournal/presented {:path [], :nextjournal/value \"#object[pathfinding$find_all_paths_optimized 0x44fa5a71 \\\"pathfinding$find_all_paths_optimized@44fa5a71\\\"]\", :nextjournal/viewer {:name nextjournal.clerk.viewer/read+inspect-viewer, :render-fn #viewer-fn (fn [x] (try [nextjournal.clerk.render/inspect (nextjournal.clerk.viewer/read-string-without-tag-table x)] (catch js/Error _e (nextjournal.clerk.render/render-unreadable-edn x)))), :hash \"5du3nEWKL6ov9p2VcYkP5JLW7a9Hwz\"}, :nextjournal/render-opts {:id \"pathfinding/find-all-paths-optimized-result\"}}, :nextjournal/blob-id nil}, :nextjournal/render-opts {:id \"pathfinding/find-all-paths-optimized-result\"}, :nextjournal/viewer {:name nextjournal.clerk.viewer/result-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-result, :hash \"5dryaWFamQn5VBuSHLJXGpfgbLUTKh\"}}]}, :nextjournal/viewer {:name nextjournal.clerk.viewer/notebook-viewer, :render-fn #viewer-fn nextjournal.clerk.render/render-notebook, :hash \"5dsiHybTyGGTEpReRaV7nfNxoDgnKx\"}}}, :current-path \"src/pathfinding\", :resource->url {\"/js/viewer.js\" \"https://storage.clerk.garden/nextjournal/clerk-assets@43sknWSpfsWGp1HAfZe1dLuBjmWH/viewer.js?immutable=true\", \"/css/viewer.css\" \"_data/8Vu85rrzNDdW6madcMcC81igyTf1P4p3jHvXtVikCcRdVLpNBbfR5AqttywaAngZaSSN8JfbwxW5cp6GLpe3Xx3vP4.css\"}, :index \"src/index.clj\"}".replaceAll('nextjournal.clerk.view/escape-closing-script-tag', 'script')
viewer.init(viewer.read_string(state))
</script></body></html>